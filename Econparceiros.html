<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Econparceiros</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Link para o arquivo manifest.json -->
    <link rel="manifest" href="manifest.json">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
        }
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 24px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
        }
        .btn {
            padding: 12px 24px;
            font-weight: 600;
            border-radius: 9999px;
            transition: background-color 0.2s, transform 0.2s;
        }
        .btn-primary {
            background-color: #2563eb;
            color: white;
        }
        .btn-primary:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }
        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            margin-top: 8px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
        }
        #message-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 24px;
            border-radius: 12px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            z-index: 100;
            display: none;
        }
        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            border-radius: 6px;
            background-color: #f3f4f6;
            margin-bottom: 8px;
        }
        .transaction-item.receita {
            background-color: #d1fae5;
        }
        .transaction-item.despesa {
            background-color: #fee2e2;
        }
        .logo-icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            vertical-align: middle;
            margin-right: 8px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Login Screen -->
    <section id="login" class="flex-grow flex items-center justify-center p-6">
        <div class="card max-w-sm w-full text-center space-y-4">
            <h2 class="text-2xl font-bold">Acesso ao Econparceiros</h2>
            <p class="text-gray-600">Por favor, insira a senha para continuar.</p>
            <input id="password-input" type="password" placeholder="Digite a senha" class="border w-full p-2 rounded">
            <button onclick="login()" class="w-full bg-blue-600 text-white py-2 rounded-full">Entrar</button>
        </div>
    </section>

    <!-- Header -->
    <header id="app-header" class="bg-blue-600 text-white p-4 shadow-md hidden">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold flex items-center">
                <!-- SVG Icon for Econparceiros: a growing chart inside a circle -->
                <svg class="logo-icon text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.477 2 2 6.477 2 12C2 17.523 6.477 22 12 22C17.523 22 22 17.523 22 12C22 6.477 17.523 2 12 2ZM17 8H15V13C15 13.5523 14.5523 14 14 14H10C9.44772 14 9 13.5523 9 13V10H7V13.5C7 13.7761 7.22386 14 7.5 14.25H9C9.55228 14.25 10 14.6977 10 15.25V17C10 17.5523 10.4477 18 11 18H13C13.5523 18 14 17.5523 14 17V15H17V18.25C17 18.5261 17.2239 18.75 17.5 18.75H18.5C18.7761 18.75 19 18.5261 19 18.25V10C19 9.17157 18.3284 8.5 17.5 8.5H17Z" fill="currentColor"/>
                </svg>
                Econparceiros
            </h1>
            <nav class="space-x-2">
                <button onclick="showSection('home')" class="px-3 py-2 bg-blue-500 rounded">In√≠cio</button>
                <button onclick="showSection('financeiro')" class="px-3 py-2 bg-blue-500 rounded">Gest√£o Financeira</button>
                <button onclick="showSection('precificacao')" class="px-3 py-2 bg-blue-500 rounded">Precifica√ß√£o</button>
                <button onclick="showSection('crescimento')" class="px-3 py-2 bg-blue-500 rounded">An√°lise de Crescimento</button>
            </nav>
        </div>
    </header>

    <!-- Main -->
    <main id="app-content" class="flex-grow p-6 space-y-12 max-w-7xl mx-auto w-full hidden">
        <!-- In√≠cio -->
        <section id="home" class="section active text-center">
            <h2 class="text-4xl font-bold mb-4 text-gray-900">Bem-vindo ao Econparceiros ü§ù</h2>
            <p class="text-lg text-gray-600">Uma parceria para o seu neg√≥cio decolar. Ferramentas inteligentes de gest√£o, precifica√ß√£o e an√°lise de expans√£o.</p>
        </section>

        <!-- Gest√£o Financeira -->
        <section id="financeiro" class="section">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Gest√£o Financeira</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Resumo -->
                <div class="card">
                    <h3 class="font-semibold mb-2 text-xl">Resumo Financeiro</h3>
                    <p class="text-gray-700">Receita Total: <span id="receitaTotal" class="font-bold text-green-600">R$ 0,00</span></p>
                    <p class="text-gray-700">Despesa Total: <span id="despesaTotal" class="font-bold text-red-600">R$ 0,00</span></p>
                    <p class="text-gray-700">Lucro/Preju√≠zo: <span id="lucroPrejuizo" class="font-bold">R$ 0,00</span></p>
                    <h4 class="mt-6 font-semibold text-lg">Transa√ß√µes</h4>
                    <ul id="transactionsList" class="space-y-2 text-sm text-gray-700 mt-4"></ul>
                </div>
                <!-- Formul√°rio -->
                <div class="card">
                    <h3 class="font-semibold mb-2 text-xl">Adicionar Transa√ß√£o</h3>
                    <div class="input-group">
                        <label for="descricao" class="text-sm">Descri√ß√£o</label>
                        <input id="descricao" type="text" placeholder="Ex: Venda de produto X" class="border w-full p-2 rounded mb-2">
                    </div>
                    <div class="input-group">
                        <label for="valor" class="text-sm">Valor (R$)</label>
                        <input id="valor" type="number" step="0.01" placeholder="Ex: 50.00" class="border w-full p-2 rounded mb-2">
                    </div>
                    <div class="input-group">
                        <label for="tipo" class="text-sm">Tipo</label>
                        <select id="tipo" class="border w-full p-2 rounded mb-2">
                            <option value="receita">Receita</option>
                            <option value="despesa">Despesa</option>
                        </select>
                    </div>
                    <button onclick="addTransacao()" class="w-full bg-blue-600 text-white py-2 rounded-full mt-4">Adicionar</button>
                </div>
            </div>
        </section>

        <!-- Precifica√ß√£o -->
        <section id="precificacao" class="section">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">Precifica√ß√£o de Produto</h2>
            <div class="card space-y-4">
                <div class="input-group">
                    <label for="custo-variavel" class="text-sm">Custo Vari√°vel Unit√°rio (R$)</label>
                    <input id="custo-variavel" type="number" step="0.01" placeholder="Ex: 15.00" class="border w-full p-2 rounded">
                </div>
                <div class="input-group">
                    <label for="custo-fixo" class="text-sm">Custo Fixo Mensal (R$)</label>
                    <input id="custo-fixo" type="number" step="0.01" placeholder="Ex: 5000.00" class="border w-full p-2 rounded">
                </div>
                <div class="input-group">
                    <label for="quantidade-unidades" class="text-sm">Unidades Produzidas/Vendidas</label>
                    <input id="quantidade-unidades" type="number" placeholder="Ex: 200" class="border w-full p-2 rounded">
                </div>
                <div class="input-group">
                    <label for="margem-lucro" class="text-sm">Margem de Lucro Desejada (%)</label>
                    <input id="margem-lucro" type="number" placeholder="Ex: 30" class="border w-full p-2 rounded">
                </div>
                <div class="input-group">
                    <label for="custo-impostos" class="text-sm">Impostos (%)</label>
                    <input id="custo-impostos" type="number" placeholder="Ex: 10" class="border w-full p-2 rounded">
                </div>
                <div class="input-group">
                    <label for="outros-custos-indiretos" class="text-sm">Outros Custos Indiretos (R$)</label>
                    <input id="outros-custos-indiretos" type="number" step="0.01" placeholder="Ex: 500.00" class="border w-full p-2 rounded">
                </div>
                <button onclick="calcularPreco()" class="w-full bg-blue-600 text-white py-2 rounded-full mt-4">Calcular Pre√ßo</button>
                <div id="resultadoPrecificacao" class="mt-4 text-center text-lg font-semibold"></div>
            </div>
        </section>

        <!-- An√°lise de Crescimento -->
        <section id="crescimento" class="section">
            <h2 class="text-2xl font-bold mb-4 text-gray-900">An√°lise de Crescimento</h2>
            <div class="card">
                <p class="text-gray-600 mb-4">Insira dados de at√© 3 cidades para simular o crescimento do seu neg√≥cio.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="space-y-2">
                        <h4 class="font-semibold">Cidade 1</h4>
                        <input id="cidade1-nome" placeholder="Nome" class="border w-full p-2 rounded">
                        <input id="cidade1-populacao" type="number" step="0.1" placeholder="Popula√ß√£o (mi)" class="border w-full p-2 rounded">
                        <input id="cidade1-renda" type="number" placeholder="Renda M√©dia" class="border w-full p-2 rounded">
                        <input id="cidade1-concorrencia" type="number" placeholder="Concorr√™ncia (1-5)" class="border w-full p-2 rounded">
                    </div>
                    <div class="space-y-2">
                        <h4 class="font-semibold">Cidade 2</h4>
                        <input id="cidade2-nome" placeholder="Nome" class="border w-full p-2 rounded">
                        <input id="cidade2-populacao" type="number" step="0.1" placeholder="Popula√ß√£o (mi)" class="border w-full p-2 rounded">
                        <input id="cidade2-renda" type="number" placeholder="Renda M√©dia" class="border w-full p-2 rounded">
                        <input id="cidade2-concorrencia" type="number" placeholder="Concorr√™ncia (1-5)" class="border w-full p-2 rounded">
                    </div>
                    <div class="space-y-2">
                        <h4 class="font-semibold">Cidade 3</h4>
                        <input id="cidade3-nome" placeholder="Nome" class="border w-full p-2 rounded">
                        <input id="cidade3-populacao" type="number" step="0.1" placeholder="Popula√ß√£o (mi)" class="border w-full p-2 rounded">
                        <input id="cidade3-renda" type="number" placeholder="Renda M√©dia" class="border w-full p-2 rounded">
                        <input id="cidade3-concorrencia" type="number" placeholder="Concorr√™ncia (1-5)" class="border w-full p-2 rounded">
                    </div>
                </div>
                <button onclick="analisarCidades()" class="mt-4 w-full bg-blue-600 text-white py-2 rounded-full">Analisar</button>
            </div>
            <div id="resultadoAnalise" class="mt-6"></div>
        </section>

        <!-- Modal de Mensagem -->
        <div id="message-modal" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white p-6 rounded-lg shadow-xl z-50 max-w-sm w-full text-center">
            <p class="text-gray-800 mb-4"></p>
            <button onclick="hideModal()" class="btn btn-primary w-full">OK</button>
        </div>
    </main>

    <!-- Footer -->
    <footer id="app-footer" class="bg-gray-200 text-gray-700 p-4 text-center hidden">
        <p>&copy; 2024 Econparceiros. Todos os direitos reservados.</p>
    </footer>

    <!-- Scripts -->
    <script>
        const SENHA_CORRETA = "econ40028922#";

        function showModal(message) {
            const modal = document.getElementById('message-modal');
            modal.querySelector('p').textContent = message;
            modal.style.display = 'block';
        }

        function hideModal() {
            const modal = document.getElementById('message-modal');
            modal.style.display = 'none';
        }

        function showSection(id) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function login() {
            const password = document.getElementById('password-input').value;
            if (password === SENHA_CORRETA) {
                document.getElementById('login').style.display = 'none';
                document.getElementById('app-header').style.display = 'flex';
                document.getElementById('app-content').style.display = 'block';
                document.getElementById('app-footer').style.display = 'block';
                showSection('home');
            } else {
                showModal("Senha incorreta. Tente novamente.");
            }
        }

        let transacoes = [];

        function addTransacao() {
            const descricao = document.getElementById('descricao').value;
            const valor = parseFloat(document.getElementById('valor').value);
            const tipo = document.getElementById('tipo').value;
            if (!descricao || isNaN(valor) || valor <= 0) {
                showModal("Por favor, preencha todos os campos com valores v√°lidos.");
                return;
            }
            transacoes.push({ descricao, valor, tipo });
            atualizarFinanceiro();
            document.getElementById('descricao').value = "";
            document.getElementById('valor').value = "";
        }

        function atualizarFinanceiro() {
            let receita = 0, despesa = 0;
            const list = document.getElementById('transactionsList');
            list.innerHTML = "";
            transacoes.forEach((t) => {
                if (t.tipo === 'receita') receita += t.valor; else despesa += t.valor;
                const li = document.createElement('li');
                li.className = `transaction-item ${t.tipo}`;
                li.innerHTML = `<span>${t.descricao} - R$ ${t.valor.toFixed(2)}</span>`;
                list.appendChild(li);
            });
            document.getElementById('receitaTotal').textContent = "R$ " + receita.toFixed(2);
            document.getElementById('despesaTotal').textContent = "R$ " + despesa.toFixed(2);
            const lucro = receita - despesa;
            document.getElementById('lucroPrejuizo').textContent = "R$ " + lucro.toFixed(2);
        }

        function calcularPreco() {
            const cv = parseFloat(document.getElementById('custo-variavel').value);
            const cf = parseFloat(document.getElementById('custo-fixo').value);
            const q = parseFloat(document.getElementById('quantidade-unidades').value);
            const ml = parseFloat(document.getElementById('margem-lucro').value) / 100;
            const imp = parseFloat(document.getElementById('custo-impostos').value) / 100;
            const outros = parseFloat(document.getElementById('outros-custos-indiretos').value);
            if ([cv, cf, q, ml, imp, outros].some(v => isNaN(v) || v < 0) || q <= 0) {
                showModal("Por favor, preencha todos os campos corretamente.");
                return;
            }
            const custoTotalUnit = (cv + (cf + outros) / q) * (1 + imp);
            const preco = custoTotalUnit / (1 - ml);
            document.getElementById('resultadoPrecificacao').textContent = `Pre√ßo sugerido: R$ ${preco.toFixed(2)}`;
        }

        function analisarCidades() {
            const cidades = [];
            for (let i = 1; i <= 3; i++) {
                const nome = document.getElementById(`cidade${i}-nome`).value;
                const pop = parseFloat(document.getElementById(`cidade${i}-populacao`).value);
                const renda = parseFloat(document.getElementById(`cidade${i}-renda`).value);
                const conc = parseFloat(document.getElementById(`cidade${i}-concorrencia`).value);
                if (nome && !isNaN(pop) && !isNaN(renda) && !isNaN(conc)) {
                    cidades.push({ nome, pop, renda, conc });
                }
            }
            if (cidades.length === 0) {
                showModal("Por favor, preencha pelo menos uma cidade para an√°lise.");
                return;
            }
            let melhor = null, melhorScore = -Infinity;
            const res = document.getElementById('resultadoAnalise');
            res.innerHTML = "";
            cidades.forEach(c => {
                const score = (c.pop * 100) + (c.renda / 10) - (c.conc * 50);
                const div = document.createElement('div');
                div.className = "p-4 rounded shadow bg-white";
                div.textContent = `${c.nome}: pontua√ß√£o ${score.toFixed(2)}`;
                res.appendChild(div);
                if (score > melhorScore) { melhorScore = score; melhor = c; }
            });
            const rec = document.createElement('p');
            rec.className = "font-bold mt-4 text-center text-lg";
            rec.textContent = `Melhor cidade: ${melhor.nome} (pontua√ß√£o: ${melhorScore.toFixed(2)})`;
            res.appendChild(rec);
        }
    </script>
</body>
</html>
